<!doctype html>
<html>
    <body>
        <h1>Click here to send request</h1>
        <button onclick="sendRequest()">Click me</button>
    </body>
    <script>
        async function sendRequest() {
            const createImageResponse = await fetch(
                "https://server.congres-2025-example.workers.dev/api/image",
            );

            const imageResponseBody = await createImageResponse.json();
            window.location.href = imageResponseBody.url;
        }

        async function getTokenFetchHeader() {
            const res = await fetch(
                "https://server.congres-2025-example.workers.dev/api/token",
            );

            if (!res.ok) {
                throw new Error(`Response status: ${response.status}`);
            }

            const data = await res.json();
            return {
                method: "POST",
                headers: {
                    Authorization: `Bearer ${data.token}`,
                },
            };
        }
    </script>
</html>
